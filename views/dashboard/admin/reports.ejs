<%
  // Data will be loaded dynamically from API
  const categoriesLabel = {
    teacherVerbal: '‡∏Ñ‡∏£‡∏π - ‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏†‡∏≤‡∏©‡∏≤ (Verbal Behaviors)',
    teacherNonVerbal: '‡∏Ñ‡∏£‡∏π - ‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏†‡∏≤‡∏©‡∏≤ (Non-Verbal Behavior)',
    studentAcademic: '‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô - ‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏≤‡∏á‡∏ß‡∏¥‡∏ä‡∏≤‡∏Å‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô',
    studentWork: '‡∏ô‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô - ‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏ú‡∏π‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ô',
    environment: '‡∏™‡∏¥‡πà‡∏á‡πÅ‡∏ß‡∏î‡∏•‡πâ‡∏≠‡∏°‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÄ‡∏£‡∏µ‡∏¢‡∏ô‡∏£‡∏π‡πâ - ‡∏™‡∏†‡∏≤‡∏û‡∏ó‡∏≤‡∏á‡∏Å‡∏≤‡∏¢‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô'
  };
%>

<div class="page-content">
<div class="card">
<div class="page-header">
<div class="header-content">
<h2 class="page-title">
  <span>üìä</span>
  ‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ù‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå
</h2>
<p class="text-muted">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏Ç‡∏≠‡∏á‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏∏‡∏Å‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏µ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</p>
</div>
<div class="header-actions">
  <button class="btn btn--secondary" onclick="refreshData()">
    <span>üîÑ</span> ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä
  </button>
  <button class="btn btn--primary" onclick="openExportModal()">
    <span>üì•</span> Export ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
  </button>
  <button class="btn btn--primary" onclick="printReport()">
    <span>üñ®Ô∏è</span> ‡∏û‡∏¥‡∏°‡∏û‡πå‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
  </button>
</div>
</div>

<!-- Filter Controls -->
<div class="filter-section">
  <h3 class="filter-title">üîç ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏°‡∏∑‡∏≠‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h3>
  <div class="filter-grid">
    <div class="form-group" style="margin:0;">
      <label class="form-label">‡∏£‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï</label>
      <select id="filterObservation" class="form-input" onchange="applyFilters()">
        <option value="">‡∏ó‡∏∏‡∏Å‡∏£‡∏≠‡∏ö (‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°)</option>
        <!-- ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏ï‡∏¥‡∏°‡∏î‡πâ‡∏ß‡∏¢ JavaScript -->
      </select>
    </div>

    <div class="form-group" style="margin:0;">
      <label class="form-label">‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏µ</label>
      <select id="filterYear" class="form-input" onchange="applyFilters()">
        <option value="">‡∏ó‡∏∏‡∏Å‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏µ</option>
        <option value="1">‡∏õ‡∏µ 1</option>
        <option value="2">‡∏õ‡∏µ 2</option>
        <option value="3">‡∏õ‡∏µ 3</option>
        <option value="4">‡∏õ‡∏µ 4</option>
      </select>
    </div>

    <div class="form-group" style="margin:0;">
      <label class="form-label">‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</label>
      <select id="filterAttempt" class="form-input" onchange="applyFilters()">
        <option value="">‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á (‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°)</option>
        <option value="1">‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 1</option>
        <option value="2">‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 2</option>
        <option value="3">‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 3</option>
        <option value="4">‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 4</option>
        <option value="5">‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 5</option>
        <option value="6">‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 6</option>
        <option value="7">‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 7</option>
        <option value="8">‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 8</option>
        <option value="9">‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà 9</option>
      </select>
    </div>
    
    <div class="form-group" style="margin:0;">
      <label class="form-label">‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</label>
      <input type="text" id="searchStudent" class="form-input" placeholder="‡∏ä‡∏∑‡πà‡∏≠, ‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤..." onkeyup="filterTable()">
    </div>

    <div class="form-group" style="margin:0;">
      <label class="form-label">‡∏ä‡πà‡∏ß‡∏á‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô</label>
      <select id="filterScore" class="form-input" onchange="filterTable()">
        <option value="">‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö</option>
        <option value="excellent">‡∏î‡∏µ‡∏°‡∏≤‡∏Å (4.5-5.0)</option>
        <option value="verygood">‡∏î‡∏µ (4.0-4.49)</option>
        <option value="good">‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (3.5-3.99)</option>
        <option value="fair">‡∏û‡∏≠‡πÉ‡∏ä‡πâ (3.0-3.49)</option>
        <option value="poor">‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á (&lt;3.0)</option>
      </select>
    </div>

    <div class="form-group" style="margin:0;">
      <label class="form-label">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡πÅ‡∏•‡πâ‡∏ß</label>
      <select id="filterEvalCount" class="form-input" onchange="filterTable()">
        <option value="">‡∏ó‡∏∏‡∏Å‡∏à‡∏≥‡∏ô‡∏ß‡∏ô</option>
        <option value="0">0/9</option>
        <option value="1">1/9</option>
        <option value="2">2/9</option>
        <option value="3">3/9</option>
        <option value="4">4/9</option>
        <option value="5">5/9</option>
        <option value="6">6/9</option>
        <option value="7">7/9</option>
        <option value="8">8/9</option>
        <option value="9">9/9</option>
      </select>
    </div>

    <div class="form-group" style="margin:0;">
      <label class="form-label">‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏ï‡∏≤‡∏°</label>
      <select id="sortBy" class="form-input" onchange="filterTable()">
        <option value="name">‡∏ä‡∏∑‡πà‡∏≠ (‡∏Å-‡∏Æ)</option>
        <option value="id">‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</option>
        <option value="year">‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏µ</option>
        <option value="score-desc">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î</option>
        <option value="score-asc">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ï‡πà‡∏≥‡∏™‡∏∏‡∏î</option>
      </select>
    </div>
  </div>
</div>

<!-- Loading State -->
<div id="loadingState" style="display:none;text-align:center;padding:60px 20px;">
  <div style="font-size:3rem;margin-bottom:16px;">‚è≥</div>
  <h3 style="color:var(--color-text);margin:0 0 8px 0;">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</h3>
  <p style="color:var(--color-muted);">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà</p>
</div>

<!-- Empty State -->
<div id="emptyState" style="display:none;text-align:center;padding:60px 20px;">
  <div style="font-size:4rem;margin-bottom:16px;">üìä</div>
  <h3 style="color:var(--color-text);margin:0 0 8px 0;">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</h3>
  <p style="color:var(--color-muted);">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡πÅ‡∏•‡πâ‡∏ß</p>
</div>

<!-- Content Area -->
<div id="reportContent" style="display:none;">

<!-- Overall Statistics Dashboard -->
<div class="stats-section">
  <h3 class="section-title">
    <span>üìà</span> ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°
  </h3>
  
  <div class="stats-overview-grid">
    <div class="stat-card">
      <div class="stat-icon">üë•</div>
      <div class="stat-content">
        <div class="stat-value" id="statTotalStudents">-</div>
        <div class="stat-label">‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">üìù</div>
      <div class="stat-content">
        <div class="stat-value" id="statTotalEvaluations">-</div>
        <div class="stat-label">‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">‚≠ê</div>
      <div class="stat-content">
        <div class="stat-value" id="statGrandAverage">-</div>
        <div class="stat-label">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏£‡∏ß‡∏°</div>
      </div>
    </div>
    
    <div class="stat-card">
      <div class="stat-icon">üèÜ</div>
      <div class="stat-content">
        <div class="stat-value" id="statExcellent">-</div>
        <div class="stat-label">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏î‡∏µ‡∏°‡∏≤‡∏Å</div>
      </div>
    </div>
  </div>

  <!-- Year Distribution -->
  <div class="year-distribution">
    <h4 style="margin:16px 0 12px 0;color:var(--color-text);">‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏ï‡∏≤‡∏°‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏µ</h4>
    <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(150px, 1fr));gap:12px;" id="yearDistributionContainer">
      <!-- Will be populated by JavaScript -->
    </div>
  </div>
</div>

<!-- Charts Section -->
<div class="charts-section">
  <h3 class="section-title">
    <span>üìä</span> ‡∏Å‡∏£‡∏≤‡∏ü‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
  </h3>
  
  <!-- Overall Average Bar Chart -->
  <div class="card chart-card">
    <h4 class="chart-title">
      <span>üìä</span> ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏î‡πâ‡∏≤‡∏ô (‡∏ó‡∏∏‡∏Å‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤)
    </h4>
    <canvas id="overallBarChart"></canvas>
  </div>

  <!-- Charts Grid -->
  <div class="charts-grid">
    <div class="card chart-card">
      <h4 class="chart-title">
        <span>üìâ</span> ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
      </h4>
      <canvas id="distributionPieChart"></canvas>
    </div>
    
    <div class="card chart-card">
      <h4 class="chart-title">
        <span>üï∏Ô∏è</span> ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î (Radar)
      </h4>
      <canvas id="skillsRadarChart"></canvas>
    </div>
  </div>

  <div class="charts-grid">
    <div class="card chart-card">
      <h4 class="chart-title">
        <span>üìä</span> ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ï‡∏≤‡∏°‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏µ
      </h4>
      <canvas id="yearComparisonChart"></canvas>
    </div>
    
    <div class="card chart-card">
      <h4 class="chart-title">
        <span>üç©</span> ‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô
      </h4>
      <canvas id="performanceDoughnutChart"></canvas>
    </div>
  </div>

  <div class="card chart-card">
    <h4 class="chart-title">
      <span>üîµ</span> ‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏à‡∏≤‡∏¢‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤ (Scatter Plot)
    </h4>
    <canvas id="studentScatterChart"></canvas>
  </div>
</div>

<!-- Detailed Student Comparison Table -->
<div class="table-section">
  <h3 class="section-title">
    <span>üìã</span> ‡∏ï‡∏≤‡∏£‡∏≤‡∏á‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
  </h3>
  
  <div class="table-responsive">
    <table class="data-table" id="studentsTable">
      <thead>
        <tr>
          <th rowspan="2" style="vertical-align:middle;">‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤</th>
          <th rowspan="2" style="vertical-align:middle;">‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•</th>
          <th rowspan="2" style="vertical-align:middle;">‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏µ</th>
          <th rowspan="2" style="vertical-align:middle;">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏£‡∏±‡πâ‡∏á</th>
          <% Object.entries(categoriesLabel).forEach(entry => { %>
            <th><%= entry[1] %></th>
          <% }); %>
          <th rowspan="2" style="vertical-align:middle;background:#f0f9ff;">‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢</th>
          <th rowspan="2" style="vertical-align:middle;">‡∏£‡∏∞‡∏î‡∏±‡∏ö</th>
          <th rowspan="2" style="vertical-align:middle;">‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏£‡∏≤‡∏¢‡∏ö‡∏∏‡∏Ñ‡∏Ñ‡∏•</th>
        </tr>
      </thead>
      <tbody id="tableBody">
        <!-- ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏ï‡∏¥‡∏°‡∏î‡πâ‡∏ß‡∏¢ JavaScript -->
      </tbody>
      <tfoot id="tableFoot">
        <!-- ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏ï‡∏¥‡∏°‡∏î‡πâ‡∏ß‡∏¢ JavaScript -->
      </tfoot>
    </table>
  </div>

  <div class="table-pagination" style="display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;margin-top:12px;">
    <div id="tablePaginationInfo" style="color:var(--color-muted);font-size:0.9rem;"></div>
    <div style="display:flex;gap:8px;align-items:center;">
      <button id="tablePrevPage" type="button" class="btn btn--secondary" onclick="prevTablePage()">‡∏Å‡πà‡∏≠‡∏ô‡∏´‡∏ô‡πâ‡∏≤</button>
      <span id="tablePageIndicator" style="color:var(--color-text);font-weight:600;"></span>
      <button id="tableNextPage" type="button" class="btn btn--secondary" onclick="nextTablePage()">‡∏ñ‡∏±‡∏î‡πÑ‡∏õ</button>
    </div>
  </div>
</div>

<!-- Category Deep Analysis -->
<div class="analysis-section">
  <h3 class="section-title">
    <span>üî¨</span> ‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÄ‡∏ä‡∏¥‡∏á‡∏•‡∏∂‡∏Å‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà
  </h3>
  
  <div class="category-analysis-grid" id="categoryAnalysisContainer">
    <!-- ‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡πÄ‡∏ï‡∏¥‡∏°‡∏î‡πâ‡∏ß‡∏¢ JavaScript -->
  </div>
</div>

</div><!-- End reportContent -->

</div>
</div>

<!-- Export Modal -->
<div id="exportModal" class="modal-overlay" style="display:none">
  <div class="modal-content" style="max-width:500px;">
    <div class="modal-header">
      <h3>üì• Export ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</h3>
      <button type="button" class="modal-close" onclick="closeExportModal()">√ó</button>
    </div>
    
    <div class="modal-body" style="padding:24px;">
      <div class="form-group">
        <label class="form-label">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏Å‡∏≤‡∏£ Export</label>
        <div style="display:flex;flex-direction:column;gap:12px;margin-top:12px;">
          <button class="export-option-btn" onclick="exportToPDF()">
            <span style="font-size:2rem;">üìÑ</span>
            <div>
              <div style="font-weight:600;">PDF Document</div>
              <div style="font-size:0.85rem;color:var(--color-muted);">‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏û‡∏¥‡∏°‡∏û‡πå‡πÅ‡∏•‡∏∞‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£</div>
            </div>
          </button>
          
          <button class="export-option-btn" onclick="exportToExcel()">
            <span style="font-size:2rem;">üìä</span>
            <div>
              <div style="font-weight:600;">Excel Spreadsheet</div>
              <div style="font-size:0.85rem;color:var(--color-muted);">‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡πÅ‡∏•‡∏∞‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
            </div>
          </button>
          
          <button class="export-option-btn" onclick="exportToCSV()">
            <span style="font-size:2rem;">üìã</span>
            <div>
              <div style="font-weight:600;">CSV File</div>
              <div style="font-size:0.85rem;color:var(--color-muted);">‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡∏∑‡πà‡∏ô‡πÜ</div>
            </div>
          </button>
          
          <button class="export-option-btn" onclick="exportToJSON()">
            <span style="font-size:2rem;">üîß</span>
            <div>
              <div style="font-weight:600;">JSON Data</div>
              <div style="font-size:0.85rem;color:var(--color-muted);">‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ô‡∏±‡∏Å‡∏û‡∏±‡∏í‡∏ô‡∏≤‡πÅ‡∏•‡∏∞‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡∏°‡∏ß‡∏•‡∏ú‡∏•‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
            </div>
          </button>
        </div>
      </div>
    </div>
    
    <div class="modal-footer">
      <button type="button" class="btn btn--secondary" onclick="closeExportModal()">‡∏õ‡∏¥‡∏î</button>
    </div>
  </div>
</div>

<link rel="stylesheet" href="/css/reports.css">

<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/jspdf-autotable@3.8.4/dist/jspdf.plugin.autotable.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>

<script>
  // Pass categories label to JavaScript
  window.categoriesLabel = <%- JSON.stringify(categoriesLabel) %>;
</script>

<script src="/js/reports.js"></script>