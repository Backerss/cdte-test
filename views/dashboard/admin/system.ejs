<div class="page-content">
  <div class="card">
    <div class="page-header">
      <div>
        <h2 style="margin-top:0;color:var(--color-primary);display:flex;align-items:center;gap:12px">
          <span>‚öôÔ∏è</span>
          ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö
        </h2>
        <p class="text-muted">‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå ‡∏î‡∏π Logs ‡πÅ‡∏•‡∏∞‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö‡∏´‡∏•‡∏±‡∏á‡∏ö‡πâ‡∏≤‡∏ô</p>
      </div>
      <div style="display:flex;gap:8px;">
        <button class="btn btn--secondary" onclick="refreshSystemData()">
          <span>üîÑ</span> ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä
        </button>
        <button class="btn btn--primary" onclick="openBackupModal()">
          <span>üíæ</span> ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        </button>
      </div>
    </div>

    <!-- System Status Control -->
    <div class="system-section">
      <h3 class="section-title">
        <span>üåê</span> ‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå
      </h3>

      <div class="status-control-grid">
        <div class="status-card active" id="statusOnline" onclick="setSystemStatus('online')">
          <div class="status-icon">‚úÖ</div>
          <div class="status-label">‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</div>
          <div class="status-desc">‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡πÑ‡∏î‡πâ‡∏õ‡∏Å‡∏ï‡∏¥</div>
        </div>

        <div class="status-card" id="statusMaintenance" onclick="setSystemStatus('maintenance')">
          <div class="status-icon">üîß</div>
          <div class="status-label">‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤</div>
          <div class="status-desc">‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏õ‡∏¥‡∏î‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á</div>
        </div>

        <div class="status-card" id="statusOffline" onclick="setSystemStatus('offline')">
          <div class="status-icon">üö´</div>
          <div class="status-label">‡∏õ‡∏¥‡∏î‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß</div>
          <div class="status-desc">‡∏õ‡∏¥‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
        </div>
      </div>

      <div class="status-message" id="statusMessage">
        <strong>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô:</strong> <span id="currentStatus">‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥</span>
        <span style="margin-left:16px;color:var(--color-muted)">‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: <span id="lastUpdate">-</span></span>
      </div>
    </div>

    <!-- System Health Monitoring -->
    <div class="system-section">
      <h3 class="section-title">
        <span>üìä</span> ‡∏™‡∏∏‡∏Ç‡∏†‡∏≤‡∏û‡∏£‡∏∞‡∏ö‡∏ö
      </h3>

      <div class="health-grid">
        <div class="health-card">
          <div class="health-icon">üñ•Ô∏è</div>
          <div class="health-info">
            <div class="health-label">CPU Usage</div>
            <div class="health-value" id="cpuUsage">0%</div>
            <div class="health-bar">
              <div class="health-bar-fill" id="cpuBar" style="width:0%"></div>
            </div>
          </div>
        </div>

        <div class="health-card">
          <div class="health-icon">üíæ</div>
          <div class="health-info">
            <div class="health-label">Memory Usage</div>
            <div class="health-value" id="memoryUsage">0%</div>
            <div class="health-bar">
              <div class="health-bar-fill" id="memoryBar" style="width:0%"></div>
            </div>
          </div>
        </div>

        <div class="health-card">
          <div class="health-icon">‚è±Ô∏è</div>
          <div class="health-info">
            <div class="health-label">Uptime</div>
            <div class="health-value" id="uptime">-</div>
          </div>
        </div>

        <div class="health-card">
          <div class="health-icon">üóÑÔ∏è</div>
          <div class="health-info">
            <div class="health-label">Database</div>
            <div class="health-value" id="dbStatus">
              <span class="status-badge active">‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÅ‡∏•‡πâ‡∏ß</span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="system-section">
      <h3 class="section-title">
        <span>‚ö°</span> ‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏î‡πà‡∏ß‡∏ô
      </h3>

      <div class="quick-actions-grid">
        <button class="action-btn" onclick="clearCache()">
          <div class="action-icon">üóëÔ∏è</div>
          <div class="action-label">‡∏•‡πâ‡∏≤‡∏á Cache</div>
        </button>

        <button class="action-btn" onclick="restartServer()">
          <div class="action-icon">üîÑ</div>
          <div class="action-label">Restart Server</div>
        </button>

        <button class="action-btn" onclick="optimizeDatabase()">
          <div class="action-icon">‚öôÔ∏è</div>
          <div class="action-label">Optimize DB</div>
        </button>

        <button class="action-btn" onclick="viewErrorLogs()">
          <div class="action-icon">‚ö†Ô∏è</div>
          <div class="action-label">Error Logs</div>
        </button>
      </div>
    </div>

    <!-- System Logs Viewer -->
    <div class="system-section">
      <h3 class="section-title">
        <span>üìù</span> System Logs
      </h3>

      <div class="logs-controls">
        <div style="display:flex;gap:12px;flex-wrap:wrap;align-items:center;">
          <select id="logLevel" class="form-input" style="width:auto;min-width:120px;" onchange="filterLogs()">
            <option value="">‡∏ó‡∏∏‡∏Å‡∏£‡∏∞‡∏î‡∏±‡∏ö</option>
            <option value="info">Info</option>
            <option value="warning">Warning</option>
            <option value="error">Error</option>
            <option value="debug">Debug</option>
          </select>

          <select id="logCategory" class="form-input" style="width:auto;min-width:150px;" onchange="filterLogs()">
            <option value="">‡∏ó‡∏∏‡∏Å‡∏´‡∏°‡∏ß‡∏î‡∏´‡∏°‡∏π‡πà</option>
            <option value="auth">Authentication</option>
            <option value="database">Database</option>
            <option value="api">API</option>
            <option value="system">System</option>
          </select>

          <input type="text" id="logSearch" class="form-input" placeholder="‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤ logs..."
            style="flex:1;min-width:200px;" onkeyup="filterLogs()">

          <button class="btn btn--secondary" onclick="clearLogsDisplay()">
            <span>üóëÔ∏è</span> ‡∏•‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠
          </button>

          <button class="btn btn--primary" onclick="exportLogs()">
            <span>üì•</span> Export
          </button>
        </div>

        <div class="logs-auto-refresh">
          <label style="display:flex;align-items:center;gap:8px;cursor:pointer;">
            <input type="checkbox" id="autoRefresh" onchange="toggleAutoRefresh()" checked>
            <span>Auto-refresh (5s)</span>
          </label>
        </div>
      </div>

      <div class="logs-viewer" id="logsViewer">
        <div class="log-entry" style="text-align:center;padding:40px;color:var(--color-muted);">
          ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î logs...
        </div>
      </div>
    </div>

    <!-- Recent Activities -->
    <div class="system-section">
      <h3 class="section-title">
        <span>üïê</span> ‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î
      </h3>

      <div class="activity-list" id="activityList">
        <!-- Will be populated by JavaScript -->
      </div>
    </div>
  </div>
</div>

<!-- Backup Modal -->
<div id="backupModal" class="modal-overlay" style="display:none">
  <div class="modal-content" style="max-width:600px;">
    <div class="modal-header">
      <h3>üíæ ‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏ö‡∏ö</h3>
      <button type="button" class="modal-close" onclick="closeBackupModal()">√ó</button>
    </div>

    <div class="modal-body" style="padding:24px;">
      <div class="form-group">
        <label class="form-label">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏≠‡∏á</label>
        <div style="display:flex;flex-direction:column;gap:8px;margin-top:8px;">
          <label style="display:flex;align-items:center;gap:8px;cursor:pointer;">
            <input type="checkbox" id="backupDB" checked>
            <span>üóÑÔ∏è ‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</span>
          </label>
          <label style="display:flex;align-items:center;gap:8px;cursor:pointer;">
            <input type="checkbox" id="backupFiles" checked>
            <span>üìÅ ‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î</span>
          </label>
          <label style="display:flex;align-items:center;gap:8px;cursor:pointer;">
            <input type="checkbox" id="backupConfig" checked>
            <span>‚öôÔ∏è ‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö</span>
          </label>
        </div>
      </div>

      <div class="backup-info" style="background:var(--color-bg);padding:16px;border-radius:8px;margin-top:16px;">
        <div style="font-size:0.9rem;color:var(--color-muted);margin-bottom:8px;">üì¶ Backup ‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î</div>
        <div style="font-weight:500;" id="lastBackupDate">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•</div>
      </div>
    </div>

    <div class="modal-footer">
      <button type="button" class="btn btn--secondary" onclick="closeBackupModal()">‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å</button>
      <button type="button" class="btn btn--primary" onclick="performBackup()">
        <span>üíæ</span> ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
      </button>
    </div>
  </div>
</div>

<style>
  .page-header {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 32px;
    gap: 16px;
    flex-wrap: wrap;
  }

  .system-section {
    margin-bottom: 32px;
    padding-bottom: 32px;
    border-bottom: 2px solid var(--color-border);
  }

  .system-section:last-child {
    border-bottom: none;
    padding-bottom: 0;
  }

  .section-title {
    color: var(--color-primary);
    font-size: 1.2rem;
    margin: 0 0 20px 0;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  /* Status Control */
  .status-control-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 16px;
    margin-bottom: 20px;
  }

  .status-card {
    background: var(--color-surface);
    border: 2px solid var(--color-border);
    border-radius: 12px;
    padding: 24px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .status-card:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .status-card.active {
    border-color: var(--color-primary);
    background: linear-gradient(135deg, rgba(74, 144, 226, 0.05), rgba(74, 144, 226, 0.1));
    box-shadow: 0 4px 12px rgba(74, 144, 226, 0.2);
  }

  .status-icon {
    font-size: 2.5rem;
    margin-bottom: 12px;
  }

  .status-label {
    font-weight: 600;
    font-size: 1.1rem;
    color: var(--color-text);
    margin-bottom: 6px;
  }

  .status-desc {
    font-size: 0.85rem;
    color: var(--color-muted);
  }

  .status-message {
    background: var(--color-bg);
    padding: 16px;
    border-radius: 8px;
    border-left: 4px solid var(--color-primary);
  }

  /* Health Monitoring */
  .health-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
    gap: 16px;
  }

  .health-card {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: 12px;
    padding: 20px;
    display: flex;
    gap: 16px;
    align-items: center;
  }

  .health-icon {
    font-size: 2.5rem;
    flex-shrink: 0;
  }

  .health-info {
    flex: 1;
    min-width: 0;
  }

  .health-label {
    font-size: 0.85rem;
    color: var(--color-muted);
    margin-bottom: 6px;
  }

  .health-value {
    font-size: 1.5rem;
    font-weight: 600;
    color: var(--color-text);
    margin-bottom: 8px;
  }

  .health-bar {
    height: 8px;
    background: var(--color-bg);
    border-radius: 4px;
    overflow: hidden;
  }

  .health-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, #4CAF50, #8BC34A);
    border-radius: 4px;
    transition: width 0.5s ease;
  }

  .health-bar-fill.warning {
    background: linear-gradient(90deg, #FF9800, #FFC107);
  }

  .health-bar-fill.danger {
    background: linear-gradient(90deg, #F44336, #E91E63);
  }

  /* Quick Actions */
  .quick-actions-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
    gap: 12px;
  }

  .action-btn {
    background: var(--color-surface);
    border: 2px solid var(--color-border);
    border-radius: 12px;
    padding: 20px;
    cursor: pointer;
    transition: all 0.3s ease;
    text-align: center;
  }

  .action-btn:hover {
    border-color: var(--color-primary);
    background: var(--color-bg);
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
  }

  .action-icon {
    font-size: 2rem;
    margin-bottom: 8px;
  }

  .action-label {
    font-weight: 500;
    color: var(--color-text);
    font-size: 0.9rem;
  }

  /* Logs Viewer */
  .logs-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    gap: 16px;
    flex-wrap: wrap;
  }

  .logs-auto-refresh label {
    font-size: 0.9rem;
    color: var(--color-text);
  }

  .logs-viewer {
    background: #1e1e1e;
    color: #d4d4d4;
    border-radius: 8px;
    padding: 16px;
    max-height: 500px;
    overflow-y: auto;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    font-size: 0.85rem;
    line-height: 1.6;
  }

  .log-entry {
    padding: 8px 12px;
    border-radius: 4px;
    margin-bottom: 4px;
    border-left: 3px solid transparent;
    transition: background 0.2s ease;
  }

  .log-entry:hover {
    background: rgba(255, 255, 255, 0.05);
  }

  .log-entry.info {
    border-left-color: #4A90E2;
  }

  .log-entry.warning {
    border-left-color: #FFA726;
    background: rgba(255, 167, 38, 0.05);
  }

  .log-entry.error {
    border-left-color: #EF5350;
    background: rgba(239, 83, 80, 0.05);
  }

  .log-entry.debug {
    border-left-color: #9E9E9E;
    opacity: 0.7;
  }

  .log-timestamp {
    color: #858585;
    margin-right: 8px;
  }

  .log-level {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 3px;
    font-size: 0.75rem;
    font-weight: 600;
    margin-right: 8px;
    text-transform: uppercase;
  }

  .log-level.info {
    background: #4A90E2;
    color: white;
  }

  .log-level.warning {
    background: #FFA726;
    color: white;
  }

  .log-level.error {
    background: #EF5350;
    color: white;
  }

  .log-level.debug {
    background: #9E9E9E;
    color: white;
  }

  .log-category {
    color: #569CD6;
    margin-right: 8px;
  }

  .log-message {
    color: #d4d4d4;
  }

  /* Activity List */
  .activity-list {
    display: flex;
    flex-direction: column;
    gap: 12px;
  }

  .activity-item {
    background: var(--color-surface);
    border: 1px solid var(--color-border);
    border-radius: 8px;
    padding: 16px;
    display: flex;
    align-items: start;
    gap: 16px;
  }

  .activity-icon {
    font-size: 1.5rem;
    flex-shrink: 0;
  }

  .activity-content {
    flex: 1;
    min-width: 0;
  }

  .activity-title {
    font-weight: 600;
    color: var(--color-text);
    margin-bottom: 4px;
  }

  .activity-desc {
    font-size: 0.9rem;
    color: var(--color-muted);
    margin-bottom: 6px;
  }

  .activity-time {
    font-size: 0.8rem;
    color: var(--color-muted);
  }

  .status-badge {
    display: inline-block;
    padding: 4px 12px;
    border-radius: 12px;
    font-size: 0.8rem;
    font-weight: 500;
  }

  .status-badge.active {
    background: #e8f5e9;
    color: #2e7d32;
  }

  .status-badge.inactive {
    background: #ffebee;
    color: #c62828;
  }

  /* Modal Styles */
  .modal-overlay {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(0, 0, 0, 0.6);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 2000;
    animation: fadeIn 0.2s ease;
  }

  .modal-content {
    background: var(--color-surface);
    border-radius: 12px;
    width: 95%;
    max-height: 90vh;
    overflow-y: auto;
    box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
    animation: slideUp 0.3s ease;
  }

  .modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 20px 24px;
    border-bottom: 2px solid var(--color-border);
    background: var(--color-bg);
  }

  .modal-header h3 {
    margin: 0;
    color: var(--color-primary);
    font-size: 1.3rem;
  }

  .modal-close {
    background: none;
    border: none;
    font-size: 1.8rem;
    cursor: pointer;
    color: var(--color-muted);
    padding: 4px;
    border-radius: 4px;
    transition: all 0.2s ease;
    line-height: 1;
  }

  .modal-close:hover {
    color: var(--color-danger);
    background: rgba(0, 0, 0, 0.05);
  }

  .modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: 12px;
    padding: 20px 24px;
    border-top: 2px solid var(--color-border);
    background: var(--color-bg);
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
    }

    to {
      opacity: 1;
    }
  }

  @keyframes slideUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }

    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Scrollbar Styling for Logs */
  .logs-viewer::-webkit-scrollbar {
    width: 8px;
  }

  .logs-viewer::-webkit-scrollbar-track {
    background: #2d2d2d;
    border-radius: 4px;
  }

  .logs-viewer::-webkit-scrollbar-thumb {
    background: #555;
    border-radius: 4px;
  }

  .logs-viewer::-webkit-scrollbar-thumb:hover {
    background: #777;
  }
</style>

<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
<script>
  // System state
  let systemStatus = 'online';
  let autoRefreshInterval = null;
  let currentLogs = [];
  let filteredLogs = [];

  // Mock data generators
  function generateMockLogs() {
    const levels = ['info', 'warning', 'error', 'debug'];
    const categories = ['auth', 'database', 'api', 'system'];
    const messages = [
      'User login successful',
      'Database connection established',
      'API request processed',
      'Cache cleared successfully',
      'Session expired',
      'File upload completed',
      'Email sent to user',
      'Password reset requested',
      'Database query executed',
      'Authentication token refreshed',
      'System health check passed',
      'Backup completed successfully'
    ];

    const now = new Date();
    return Array.from({ length: 50 }, (_, i) => ({
      timestamp: new Date(now.getTime() - (i * 30000)).toISOString(),
      level: levels[Math.floor(Math.random() * levels.length)],
      category: categories[Math.floor(Math.random() * categories.length)],
      message: messages[Math.floor(Math.random() * messages.length)]
    }));
  }

  function generateMockActivities() {
    return [
      {
        icon: 'üë§',
        title: '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏´‡∏°‡πà‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô',
        desc: '‡∏™‡∏°‡∏ä‡∏≤‡∏¢ ‡πÉ‡∏à‡∏î‡∏µ (6501001) ‡πÑ‡∏î‡πâ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö',
        time: '5 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß'
      },
      {
        icon: 'üîÑ',
        title: '‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå',
        desc: '‡∏™‡∏°‡∏´‡∏ç‡∏¥‡∏á ‡∏£‡∏±‡∏Å‡πÄ‡∏£‡∏µ‡∏¢‡∏ô ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå',
        time: '15 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß'
      },
      {
        icon: 'üíæ',
        title: '‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥',
        desc: '‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à (245 MB)',
        time: '1 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß'
      },
      {
        icon: '‚ö†Ô∏è',
        title: '‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß',
        desc: '‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏û‡∏¢‡∏≤‡∏¢‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡πâ‡∏°‡πÄ‡∏´‡∏•‡∏ß 3 ‡∏Ñ‡∏£‡∏±‡πâ‡∏á',
        time: '2 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß'
      },
      {
        icon: 'üìß',
        title: '‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô',
        desc: '‡∏™‡πà‡∏á‡∏≠‡∏µ‡πÄ‡∏°‡∏•‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡πÑ‡∏õ‡∏¢‡∏±‡∏á‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ 45 ‡∏Ñ‡∏ô',
        time: '3 ‡∏ä‡∏±‡πà‡∏ß‡πÇ‡∏°‡∏á‡∏ó‡∏µ‡πà‡πÅ‡∏•‡πâ‡∏ß'
      }
    ];
  }

  // Initialize page
  document.addEventListener('DOMContentLoaded', function () {
    initializeSystemData();
    loadLogs();
    loadActivities();
    updateSystemHealth();

    // Start auto-refresh
    toggleAutoRefresh();

    // Update time display
    updateLastUpdateTime();
    setInterval(updateLastUpdateTime, 1000);
  });

  function initializeSystemData() {
    systemStatus = 'online';
    updateStatusDisplay();
  }

  function setSystemStatus(status) {
    systemStatus = status;

    // Update UI
    document.querySelectorAll('.status-card').forEach(card => {
      card.classList.remove('active');
    });
    document.getElementById(`status${status.charAt(0).toUpperCase() + status.slice(1)}`).classList.add('active');

    updateStatusDisplay();

    // Show confirmation
    const statusText = {
      online: '‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥',
      maintenance: '‡πÇ‡∏´‡∏°‡∏î‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤',
      offline: '‡∏õ‡∏¥‡∏î‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß'
    };

    Swal.fire({
      icon: 'success',
      title: '‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',
      text: `‡πÄ‡∏ß‡πá‡∏ö‡πÑ‡∏ã‡∏ï‡πå‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡πÇ‡∏´‡∏°‡∏î "${statusText[status]}" ‡πÅ‡∏•‡πâ‡∏ß`,
      timer: 2000,
      showConfirmButton: false
    });
  }

  function updateStatusDisplay() {
    const statusText = {
      online: '‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥ ‚úÖ',
      maintenance: '‡∏≠‡∏¢‡∏π‡πà‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ö‡∏≥‡∏£‡∏∏‡∏á‡∏£‡∏±‡∏Å‡∏©‡∏≤ üîß',
      offline: '‡∏õ‡∏¥‡∏î‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß üö´'
    };

    document.getElementById('currentStatus').textContent = statusText[systemStatus];
  }

  function updateLastUpdateTime() {
    const now = new Date();
    const timeStr = now.toLocaleTimeString('th-TH', {
      hour: '2-digit',
      minute: '2-digit',
      second: '2-digit'
    });
    document.getElementById('lastUpdate').textContent = timeStr;
  }

  function updateSystemHealth() {
    // Simulate CPU usage
    const cpu = Math.floor(Math.random() * 30) + 20; // 20-50%
    document.getElementById('cpuUsage').textContent = `${cpu}%`;
    const cpuBar = document.getElementById('cpuBar');
    cpuBar.style.width = `${cpu}%`;
    cpuBar.className = 'health-bar-fill';
    if (cpu > 70) cpuBar.classList.add('danger');
    else if (cpu > 50) cpuBar.classList.add('warning');

    // Simulate Memory usage
    const memory = Math.floor(Math.random() * 40) + 30; // 30-70%
    document.getElementById('memoryUsage').textContent = `${memory}%`;
    const memoryBar = document.getElementById('memoryBar');
    memoryBar.style.width = `${memory}%`;
    memoryBar.className = 'health-bar-fill';
    if (memory > 80) memoryBar.classList.add('danger');
    else if (memory > 60) memoryBar.classList.add('warning');

    // Uptime
    const hours = Math.floor(Math.random() * 100) + 24;
    const days = Math.floor(hours / 24);
    const remainingHours = hours % 24;
    document.getElementById('uptime').textContent = `${days}d ${remainingHours}h`;
  }

  function loadLogs() {
    currentLogs = generateMockLogs();
    filteredLogs = [...currentLogs];
    renderLogs();
  }

  function renderLogs() {
    const viewer = document.getElementById('logsViewer');

    if (filteredLogs.length === 0) {
      viewer.innerHTML = `
      <div class="log-entry" style="text-align:center;padding:40px;color:#858585;">
        ‡πÑ‡∏°‡πà‡∏û‡∏ö logs ‡∏ó‡∏µ‡πà‡∏ï‡∏£‡∏á‡∏Å‡∏±‡∏ö‡πÄ‡∏á‡∏∑‡πà‡∏≠‡∏ô‡πÑ‡∏Ç‡∏Å‡∏≤‡∏£‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤
      </div>
    `;
      return;
    }

    viewer.innerHTML = filteredLogs.map(log => {
      const time = new Date(log.timestamp).toLocaleTimeString('th-TH');
      return `
      <div class="log-entry ${log.level}">
        <span class="log-timestamp">[${time}]</span>
        <span class="log-level ${log.level}">${log.level}</span>
        <span class="log-category">[${log.category}]</span>
        <span class="log-message">${log.message}</span>
      </div>
    `;
    }).join('');

    // Auto-scroll to bottom
    viewer.scrollTop = viewer.scrollHeight;
  }

  function filterLogs() {
    const level = document.getElementById('logLevel').value;
    const category = document.getElementById('logCategory').value;
    const search = document.getElementById('logSearch').value.toLowerCase();

    filteredLogs = currentLogs.filter(log => {
      const matchLevel = !level || log.level === level;
      const matchCategory = !category || log.category === category;
      const matchSearch = !search || log.message.toLowerCase().includes(search);

      return matchLevel && matchCategory && matchSearch;
    });

    renderLogs();
  }

  function clearLogsDisplay() {
    Swal.fire({
      title: '‡∏•‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠ Logs?',
      text: '‡∏Å‡∏≤‡∏£‡∏Å‡∏£‡∏∞‡∏ó‡∏≥‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏•‡πâ‡∏≤‡∏á logs ‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠',
      icon: 'question',
      showCancelButton: true,
      confirmButtonText: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô',
      cancelButtonText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å'
    }).then((result) => {
      if (result.isConfirmed) {
        currentLogs = [];
        filteredLogs = [];
        renderLogs();
        Swal.fire({
          icon: 'success',
          title: '‡∏•‡πâ‡∏≤‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',
          timer: 1500,
          showConfirmButton: false
        });
      }
    });
  }

  function exportLogs() {
    const data = filteredLogs.map(log =>
      `[${log.timestamp}] [${log.level.toUpperCase()}] [${log.category}] ${log.message}`
    ).join('\n');

    const blob = new Blob([data], { type: 'text/plain' });
    const url = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = url;
    a.download = `system-logs-${new Date().toISOString().split('T')[0]}.txt`;
    a.click();
    URL.revokeObjectURL(url);

    Swal.fire({
      icon: 'success',
      title: 'Export ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',
      text: '‡∏î‡∏≤‡∏ß‡∏ô‡πå‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå logs ‡πÅ‡∏•‡πâ‡∏ß',
      timer: 2000,
      showConfirmButton: false
    });
  }

  function toggleAutoRefresh() {
    const checkbox = document.getElementById('autoRefresh');

    if (checkbox.checked) {
      autoRefreshInterval = setInterval(() => {
        // Add new log entry
        const levels = ['info', 'warning', 'error', 'debug'];
        const categories = ['auth', 'database', 'api', 'system'];
        const messages = [
          'Heartbeat check passed',
          'Request processed',
          'Database connection verified',
          'Cache hit',
          'Session validated'
        ];

        const newLog = {
          timestamp: new Date().toISOString(),
          level: levels[Math.floor(Math.random() * levels.length)],
          category: categories[Math.floor(Math.random() * categories.length)],
          message: messages[Math.floor(Math.random() * messages.length)]
        };

        currentLogs.unshift(newLog);
        if (currentLogs.length > 100) currentLogs.pop();

        filterLogs();
        updateSystemHealth();
      }, 5000);
    } else {
      if (autoRefreshInterval) {
        clearInterval(autoRefreshInterval);
        autoRefreshInterval = null;
      }
    }
  }

  function loadActivities() {
    const activities = generateMockActivities();
    const container = document.getElementById('activityList');

    container.innerHTML = activities.map(activity => `
    <div class="activity-item">
      <div class="activity-icon">${activity.icon}</div>
      <div class="activity-content">
        <div class="activity-title">${activity.title}</div>
        <div class="activity-desc">${activity.desc}</div>
        <div class="activity-time">üïê ${activity.time}</div>
      </div>
    </div>
  `).join('');
  }

  function refreshSystemData() {
    Swal.fire({
      title: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...',
      allowOutsideClick: false,
      didOpen: () => {
        Swal.showLoading();
      }
    });

    setTimeout(() => {
      loadLogs();
      loadActivities();
      updateSystemHealth();

      Swal.fire({
        icon: 'success',
        title: '‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',
        timer: 1500,
        showConfirmButton: false
      });
    }, 1000);
  }

  function clearCache() {
    Swal.fire({
      title: '‡∏•‡πâ‡∏≤‡∏á Cache?',
      text: '‡∏Å‡∏≤‡∏£‡∏•‡πâ‡∏≤‡∏á cache ‡∏≠‡∏≤‡∏à‡∏™‡πà‡∏á‡∏ú‡∏•‡∏ï‡πà‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏£‡πá‡∏ß‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß',
      icon: 'warning',
      showCancelButton: true,
      confirmButtonText: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô',
      cancelButtonText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å'
    }).then((result) => {
      if (result.isConfirmed) {
        Swal.fire({
          title: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏•‡πâ‡∏≤‡∏á Cache...',
          allowOutsideClick: false,
          didOpen: () => {
            Swal.showLoading();
          }
        });

        setTimeout(() => {
          Swal.fire({
            icon: 'success',
            title: '‡∏•‡πâ‡∏≤‡∏á Cache ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',
            text: '‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏°‡∏≤‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô',
            timer: 2000
          });
        }, 1500);
      }
    });
  }

  function restartServer() {
    Swal.fire({
      title: 'Restart Server?',
      text: '‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡∏ä‡∏±‡πà‡∏ß‡∏Ñ‡∏£‡∏≤‡∏ß',
      icon: 'warning',
      showCancelButton: true,
      confirmButtonText: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô',
      cancelButtonText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å',
      confirmButtonColor: '#d33'
    }).then((result) => {
      if (result.isConfirmed) {
        Swal.fire({
          icon: 'info',
          title: '‡∏Å‡∏≤‡∏£ Restart Server',
          text: '‡∏ü‡∏µ‡πÄ‡∏à‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏õ‡∏¥‡∏î‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡πÇ‡∏´‡∏°‡∏î Demo',
          timer: 2000
        });
      }
    });
  }

  function optimizeDatabase() {
    Swal.fire({
      title: 'Optimize Database?',
      text: '‡∏Å‡∏≤‡∏£‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£‡∏ô‡∏µ‡πâ‡∏≠‡∏≤‡∏à‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà',
      icon: 'question',
      showCancelButton: true,
      confirmButtonText: '‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô',
      cancelButtonText: '‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å'
    }).then((result) => {
      if (result.isConfirmed) {
        Swal.fire({
          title: '‡∏Å‡∏≥‡∏•‡∏±‡∏á Optimize...',
          allowOutsideClick: false,
          didOpen: () => {
            Swal.showLoading();
          }
        });

        setTimeout(() => {
          Swal.fire({
            icon: 'success',
            title: 'Optimize ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',
            text: '‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û‡∏Ç‡∏≠‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡∏µ‡∏Ç‡∏∂‡πâ‡∏ô 15%',
            timer: 2000
          });
        }, 2000);
      }
    });
  }

  function viewErrorLogs() {
    const errorLogs = currentLogs.filter(log => log.level === 'error');

    if (errorLogs.length === 0) {
      Swal.fire({
        icon: 'success',
        title: '‡πÑ‡∏°‡πà‡∏û‡∏ö Error',
        text: '‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡∏î‡∏µ ‡πÑ‡∏°‡πà‡∏°‡∏µ error ‡πÉ‡∏ô‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ',
        timer: 2000
      });
      return;
    }

    document.getElementById('logLevel').value = 'error';
    filterLogs();

    Swal.fire({
      icon: 'info',
      title: `‡∏û‡∏ö ${errorLogs.length} Errors`,
      text: '‡πÅ‡∏™‡∏î‡∏á error logs ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á',
      timer: 2000
    });
  }

  function openBackupModal() {
    document.getElementById('backupModal').style.display = 'flex';

    // Set last backup date
    const lastBackup = new Date();
    lastBackup.setDate(lastBackup.getDate() - 1);
    document.getElementById('lastBackupDate').textContent = lastBackup.toLocaleString('th-TH');
  }

  function closeBackupModal() {
    document.getElementById('backupModal').style.display = 'none';
  }

  function performBackup() {
    const backupDB = document.getElementById('backupDB').checked;
    const backupFiles = document.getElementById('backupFiles').checked;
    const backupConfig = document.getElementById('backupConfig').checked;

    if (!backupDB && !backupFiles && !backupConfig) {
      Swal.fire({
        icon: 'warning',
        title: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•',
        text: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 1 ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£'
      });
      return;
    }

    closeBackupModal();

    Swal.fire({
      title: '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...',
      html: '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà<br><b>0%</b>',
      allowOutsideClick: false,
      didOpen: () => {
        Swal.showLoading();

        let progress = 0;
        const interval = setInterval(() => {
          progress += 10;
          Swal.getHtmlContainer().querySelector('b').textContent = `${progress}%`;

          if (progress >= 100) {
            clearInterval(interval);

            Swal.fire({
              icon: 'success',
              title: '‡∏™‡∏≥‡∏£‡∏≠‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à',
              text: '‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏π‡∏Å‡∏™‡∏≥‡∏£‡∏≠‡∏á‡πÑ‡∏ß‡πâ‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß',
              timer: 2000
            });

            // Update last backup date
            document.getElementById('lastBackupDate').textContent = new Date().toLocaleString('th-TH');
          }
        }, 300);
      }
    });
  }

  // Close modal when clicking outside
  window.onclick = function (event) {
    const modal = document.getElementById('backupModal');
    if (event.target === modal) {
      closeBackupModal();
    }
  }
</script>