<%
  // Mock evaluation data
  const evaluationData = {
    personality: { label: '‡∏ö‡∏∏‡∏Ñ‡∏•‡∏¥‡∏Å‡∏†‡∏≤‡∏û‡πÅ‡∏•‡∏∞‡∏°‡∏ô‡∏∏‡∏©‡∏¢‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå', score: 4.5, total: 5 },
    teaching: { label: '‡∏ó‡∏±‡∏Å‡∏©‡∏∞‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô', score: 4.2, total: 5 },
    planning: { label: '‡∏Å‡∏≤‡∏£‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô', score: 4.0, total: 5 },
    classroom: { label: '‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏ä‡∏±‡πâ‡∏ô‡πÄ‡∏£‡∏µ‡∏¢‡∏ô', score: 4.3, total: 5 },
    assessment: { label: '‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏î‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ú‡∏•', score: 3.8, total: 5 },
    innovation: { label: '‡∏ô‡∏ß‡∏±‡∏ï‡∏Å‡∏£‡∏£‡∏°‡πÅ‡∏•‡∏∞‡∏™‡∏∑‡πà‡∏≠‡∏Å‡∏≤‡∏£‡∏™‡∏≠‡∏ô', score: 4.6, total: 5 },
    responsibility: { label: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏£‡∏±‡∏ö‡∏ú‡∏¥‡∏î‡∏ä‡∏≠‡∏ö', score: 4.8, total: 5 },
    punctuality: { label: '‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ï‡∏£‡∏á‡∏ï‡πà‡∏≠‡πÄ‡∏ß‡∏•‡∏≤', score: 4.7, total: 5 }
  };

  const overallAverage = Object.values(evaluationData).reduce((sum, item) => sum + item.score, 0) / Object.keys(evaluationData).length;
  
  // Practice period check
  const today = new Date();
  const practicePeriods = [
    { year: 1, start: new Date('2025-01-01'), end: new Date('2025-01-15'), name: '‡∏ù‡∏∂‡∏Å‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ß‡∏¥‡∏ä‡∏≤‡∏ä‡∏µ‡∏û‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 1' },
    { year: 2, start: new Date('2025-06-01'), end: new Date('2025-06-30'), name: '‡∏ù‡∏∂‡∏Å‡∏õ‡∏è‡∏¥‡∏ö‡∏±‡∏ï‡∏¥‡∏ß‡∏¥‡∏ä‡∏≤‡∏ä‡∏µ‡∏û‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô 2' },
    { year: 3, start: new Date('2025-03-01'), end: new Date('2025-05-31'), name: '‡∏ù‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ß‡∏¥‡∏ä‡∏≤‡∏ä‡∏µ‡∏û‡∏Ñ‡∏£‡∏π 1' },
    { year: 4, start: new Date('2025-10-01'), end: new Date('2025-12-15'), name: '‡∏ù‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå‡∏ß‡∏¥‡∏ä‡∏≤‡∏ä‡∏µ‡∏û‡∏Ñ‡∏£‡∏π 2' }
  ];

  const currentPractice = practicePeriods.find(p => today >= p.start && today <= p.end);
  const userYear = user.year || 3;
%>

<div class="dashboard-welcome">
  <!-- Personal Greeting Card -->
  <div class="card greeting-card" style="margin-bottom:24px;background:linear-gradient(135deg, var(--color-surface) 0%, var(--color-surface) 100%);border-left:4px solid var(--color-primary)">
    <h2 style="margin:0 0 12px 0;color:var(--color-primary);font-size:1.75rem">
      ‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ, <%= user.firstName %> <%= user.lastName %> üëã
    </h2>
    <p style="color:var(--color-text);margin:0 0 8px 0;font-size:1.1rem">
      <strong>‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏ä‡∏±‡πâ‡∏ô‡∏õ‡∏µ‡∏ó‡∏µ‡πà <%= userYear %></strong>
    </p>
    <div style="display:flex;align-items:center;gap:8px;margin-top:12px">
      <span style="font-size:1.2rem"><%= currentPractice ? 'üü¢' : 'üîµ' %></span>
      <div>
        <strong style="color:var(--color-text)">‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞:</strong>
        <% if (currentPractice) { %>
          <span style="color:var(--color-success);font-weight:600">
            ‡∏Ç‡∏ì‡∏∞‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á<%= currentPractice.name %>
          </span><br>
          <span class="text-muted" style="font-size:0.9rem">
            (‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà <%= currentPractice.start.toLocaleDateString('th-TH', { day: 'numeric', month: 'long', year: 'numeric' }) %> - 
            <%= currentPractice.end.toLocaleDateString('th-TH', { day: 'numeric', month: 'long', year: 'numeric' }) %>)
          </span>
        <% } else { %>
          <span style="color:var(--color-muted);font-weight:600">No Active Practice Period</span><br>
          <span class="text-muted" style="font-size:0.9rem">‡πÑ‡∏°‡πà‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏ä‡πà‡∏ß‡∏á‡∏ù‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå</span>
        <% } %>
      </div>
    </div>
  </div>

  <!-- Overall Performance Summary -->
  <div class="card" style="margin-bottom:24px">
    <h3 style="margin-top:0;color:var(--color-text);display:flex;align-items:center;gap:10px">
      <span>üìä</span>
      ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏°
    </h3>
    <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:20px;margin-top:20px">
      <div class="stat-box" style="text-align:center;padding:20px;background:var(--color-bg);border-radius:10px">
        <div style="font-size:2.5rem;font-weight:700;color:var(--color-primary)">
          <%= overallAverage.toFixed(2) %>
        </div>
        <div class="text-muted" style="font-size:0.95rem;margin-top:8px">‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡πÇ‡∏î‡∏¢‡∏£‡∏ß‡∏°</div>
        <div style="font-size:0.85rem;color:var(--color-success);margin-top:4px;font-weight:600">
          <%= overallAverage >= 4.5 ? '‡∏î‡∏µ‡∏°‡∏≤‡∏Å' : overallAverage >= 4 ? '‡∏î‡∏µ' : overallAverage >= 3.5 ? '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á' : overallAverage >= 3 ? '‡∏û‡∏≠‡πÉ‡∏ä‡πâ' : '‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á' %>
        </div>
      </div>
      <div class="stat-box" style="text-align:center;padding:20px;background:var(--color-bg);border-radius:10px">
        <div style="font-size:2.5rem;font-weight:700;color:var(--color-success)">
          <%= Object.keys(evaluationData).length %>
        </div>
        <div class="text-muted" style="font-size:0.95rem;margin-top:8px">‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</div>
      </div>
      <div class="stat-box" style="text-align:center;padding:20px;background:var(--color-bg);border-radius:10px">
        <div style="font-size:2.5rem;font-weight:700;color:var(--color-secondary)">
          <%= Object.values(evaluationData).filter(d => d.score >= 4.5).length %>
        </div>
        <div class="text-muted" style="font-size:0.95rem;margin-top:8px">‡∏î‡πâ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏î‡∏µ‡∏°‡∏≤‡∏Å</div>
      </div>
    </div>
  </div>

  <!-- Evaluation Charts -->
  <div class="card" style="margin-bottom:24px">
    <h3 style="margin-top:0;color:var(--color-text);display:flex;align-items:center;gap:10px">
      <span>üìà</span>
      ‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏î‡πâ‡∏≤‡∏ô
    </h3>
    <p class="text-muted" style="margin:0 0 24px 0;font-size:0.9rem">
      ‡∏°‡∏≤‡∏ï‡∏£‡∏ß‡∏±‡∏î: 1-1.99 (‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á) | 2-2.99 (‡∏û‡∏≠‡πÉ‡∏ä‡πâ) | 3-3.99 (‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á) | 4-4.49 (‡∏î‡∏µ) | 4.5-5 (‡∏î‡∏µ‡∏°‡∏≤‡∏Å)
    </p>

    <!-- Bar Chart -->
    <div class="evaluation-chart">
      <% Object.entries(evaluationData).forEach(([key, data]) => { 
        const percentage = (data.score / data.total) * 100;
        let colorClass = 'score-excellent';
        if (data.score < 3) colorClass = 'score-poor';
        else if (data.score < 3.5) colorClass = 'score-fair';
        else if (data.score < 4) colorClass = 'score-good';
        else if (data.score < 4.5) colorClass = 'score-very-good';
      %>
        <div class="chart-row" style="margin-bottom:16px">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:6px">
            <span style="font-weight:600;color:var(--color-text);font-size:0.95rem">
              <%= data.label %>
            </span>
            <span style="font-weight:700;color:var(--color-primary);font-size:1.1rem">
              <%= data.score.toFixed(1) %> / <%= data.total %>
            </span>
          </div>
          <div class="progress-bar" style="background:var(--color-border);height:28px;border-radius:8px;overflow:hidden;position:relative">
            <div class="progress-fill <%= colorClass %>" 
                 style="width:<%= percentage %>%;height:100%;transition:width 0.8s ease;display:flex;align-items:center;padding:0 12px">
              <span style="color:#fff;font-weight:600;font-size:0.85rem;white-space:nowrap">
                <%= percentage.toFixed(0) %>%
              </span>
            </div>
          </div>
        </div>
      <% }); %>
    </div>
  </div>


  <!-- Advanced Charts Section -->
  <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(450px, 1fr));gap:24px;margin-bottom:24px">
    <!-- Line Chart - Progress Over Time -->
    <div class="card">
      <h3 style="margin-top:0;color:var(--color-text);display:flex;align-items:center;gap:10px">
        <span>üìâ</span>
        ‡∏Å‡∏£‡∏≤‡∏ü‡πÄ‡∏™‡πâ‡∏ô‡πÅ‡∏™‡∏î‡∏á‡∏û‡∏±‡∏í‡∏ô‡∏≤‡∏Å‡∏≤‡∏£‡∏ï‡∏≤‡∏°‡πÄ‡∏ß‡∏•‡∏≤
      </h3>
      <canvas id="lineChart" style="max-height:300px"></canvas>
    </div>

    <!-- Pie Chart - Score Distribution -->
    <div class="card">
      <h3 style="margin-top:0;color:var(--color-text);display:flex;align-items:center;gap:10px">
        <span>ü•ß</span>
        ‡∏Å‡∏£‡∏≤‡∏ü‡∏ß‡∏á‡∏Å‡∏•‡∏°‡∏™‡∏±‡∏î‡∏™‡πà‡∏ß‡∏ô‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
      </h3>
      <canvas id="pieChart" style="max-height:300px"></canvas>
    </div>
  </div>

  <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(450px, 1fr));gap:24px;margin-bottom:24px">
    <!-- Scatter Plot -->
    <div class="card">
      <h3 style="margin-top:0;color:var(--color-text);display:flex;align-items:center;gap:10px">
        <span>üîµ</span>
        ‡∏Å‡∏£‡∏≤‡∏ü‡∏à‡∏∏‡∏î (Scatter Plot)
      </h3>
      <canvas id="scatterChart" style="max-height:300px"></canvas>
    </div>

    <!-- Column Chart (Vertical Bar) -->
    <div class="card">
      <h3 style="margin-top:0;color:var(--color-text);display:flex;align-items:center;gap:10px">
        <span>üìä</span>
        ‡∏Å‡∏£‡∏≤‡∏ü‡πÅ‡∏ó‡πà‡∏á‡πÅ‡∏ô‡∏ß‡∏ï‡∏±‡πâ‡∏á
      </h3>
      <canvas id="columnChart" style="max-height:300px"></canvas>
    </div>
  </div>

  <!-- Radar Chart with Chart.js -->
  <div class="card" style="margin-bottom:24px">
    <h3 style="margin-top:0;color:var(--color-text);display:flex;align-items:center;gap:10px">
      <span>üï∏Ô∏è</span>
      Radar Chart - ‡∏†‡∏≤‡∏û‡∏£‡∏ß‡∏°‡∏ó‡∏∏‡∏Å‡∏î‡πâ‡∏≤‡∏ô
    </h3>
    <div style="max-width:600px;margin:0 auto">
      <canvas id="radarChart"></canvas>
    </div>
  </div>

  <!-- Doughnut Chart -->
  <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(450px, 1fr));gap:24px;margin-bottom:24px">
    <div class="card">
      <h3 style="margin-top:0;color:var(--color-text);display:flex;align-items:center;gap:10px">
        <span>üç©</span>
        Doughnut Chart - ‡∏£‡∏∞‡∏î‡∏±‡∏ö‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô
      </h3>
      <canvas id="doughnutChart" style="max-height:300px"></canvas>
    </div>

    <!-- Area Chart -->
    <div class="card">
      <h3 style="margin-top:0;color:var(--color-text);display:flex;align-items:center;gap:10px">
        <span>üóª</span>
        Area Chart - ‡πÄ‡∏õ‡∏£‡∏µ‡∏¢‡∏ö‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö‡∏ó‡∏±‡∏Å‡∏©‡∏∞
      </h3>
      <canvas id="areaChart" style="max-height:300px"></canvas>
    </div>
  </div>

  <!-- Quick Access Menu -->
  <div class="dashboard-grid">
    <!-- School Info Card -->
    <a href="/dashboard/school-info" style="text-decoration:none">
      <div class="dashboard-card" style="cursor:pointer;transition:transform .2s ease">
        <div class="dashboard-card-header">
          <h3 class="dashboard-card-title">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ñ‡∏≤‡∏ô‡∏®‡∏∂‡∏Å‡∏©‡∏≤</h3>
          <span class="dashboard-card-icon">üè´</span>
        </div>
        <p class="text-muted" style="margin:0;font-size:0.9rem">
          ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏ñ‡∏≤‡∏ô‡∏ó‡∏µ‡πà‡∏ù‡∏∂‡∏Å‡∏õ‡∏£‡∏∞‡∏™‡∏ö‡∏Å‡∏≤‡∏£‡∏ì‡πå
        </p>
      </div>
    </a>

    <!-- Mentor Info Card -->
    <a href="/dashboard/mentor-info" style="text-decoration:none">
      <div class="dashboard-card" style="cursor:pointer;transition:transform .2s ease">
        <div class="dashboard-card-header">
          <h3 class="dashboard-card-title">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏π‡∏û‡∏µ‡πà‡πÄ‡∏•‡∏µ‡πâ‡∏¢‡∏á</h3>
          <span class="dashboard-card-icon">üë®‚Äçüè´</span>
        </div>
        <p class="text-muted" style="margin:0;font-size:0.9rem">
          ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Ñ‡∏£‡∏π‡∏ó‡∏µ‡πà‡∏õ‡∏£‡∏∂‡∏Å‡∏©‡∏≤
        </p>
      </div>
    </a>

    <!-- Evaluation Card -->
    <a href="/dashboard/evaluation" style="text-decoration:none">
      <div class="dashboard-card" style="cursor:pointer;transition:transform .2s ease">
        <div class="dashboard-card-header">
          <h3 class="dashboard-card-title">‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</h3>
          <span class="dashboard-card-icon">üìù</span>
        </div>
        <p class="text-muted" style="margin:0;font-size:0.9rem">
          ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥‡πÅ‡∏ö‡∏ö‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡πÉ‡∏´‡∏°‡πà
        </p>
      </div>
    </a>

    <!-- History Card -->
    <a href="/dashboard/history" style="text-decoration:none">
      <div class="dashboard-card" style="cursor:pointer;transition:transform .2s ease">
        <div class="dashboard-card-header">
          <h3 class="dashboard-card-title">‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô</h3>
          <span class="dashboard-card-icon">üìã</span>
        </div>
        <p class="text-muted" style="margin:0;font-size:0.9rem">
          ‡∏î‡∏π‡∏õ‡∏£‡∏∞‡∏ß‡∏±‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô
        </p>
      </div>
    </a>
  </div>

  <!-- Quick Stats -->
  <div class="card">
    <h3 style="margin-top:0;margin-bottom:16px;color:var(--color-text)">‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥</h3>
    <div style="display:grid;grid-template-columns:repeat(auto-fit, minmax(200px, 1fr));gap:20px">
      <div style="text-align:center">
        <div style="font-size:2rem;font-weight:700;color:var(--color-primary)">0</div>
        <div class="text-muted" style="font-size:0.9rem">‡∏Å‡∏≤‡∏£‡∏õ‡∏£‡∏∞‡πÄ‡∏°‡∏¥‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</div>
      </div>
      <div style="text-align:center">
        <div style="font-size:2rem;font-weight:700;color:var(--color-success)">0</div>
        <div class="text-muted" style="font-size:0.9rem">‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß</div>
      </div>
      <div style="text-align:center">
        <div style="font-size:2rem;font-weight:700;color:var(--color-secondary)">0</div>
        <div class="text-muted" style="font-size:0.9rem">‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</div>
      </div>
    </div>
  </div>
</div>

<style>
  .dashboard-card:hover{
    transform:translateY(-2px);
    box-shadow:0 4px 12px rgba(0,0,0,0.08);
  }
  
  .score-poor { background-color: #DC2626; }
  .score-fair { background-color: #F59E0B; }
  .score-good { background-color: #FBB425; }
  .score-very-good { background-color: #3B82F6; }
  .score-excellent { background-color: #16A34A; }
</style>

<script>
  // Prepare data for charts
  const labels = <%- JSON.stringify(Object.values(evaluationData).map(d => d.label)) %>;
  const scores = <%- JSON.stringify(Object.values(evaluationData).map(d => d.score)) %>;
  const colors = [
    '#2E3094', // primary
    '#FBB425', // secondary
    '#16A34A', // success
    '#DC2626', // danger
    '#0EA5E9', // info
    '#F59E0B', // orange
    '#8B5CF6', // purple
    '#EC4899'  // pink
  ];

  // Chart.js default config
  Chart.defaults.font.family = '-apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif';
  Chart.defaults.color = '#0F1724';

  // 1. Line Chart - Progress Over Time (Mock data with monthly progress)
  const lineCtx = document.getElementById('lineChart');
  if (lineCtx) {
    new Chart(lineCtx, {
      type: 'line',
      data: {
        labels: ['‡∏°.‡∏Ñ.', '‡∏Å.‡∏û.', '‡∏°‡∏µ.‡∏Ñ.', '‡πÄ‡∏°.‡∏¢.', '‡∏û.‡∏Ñ.', '‡∏°‡∏¥.‡∏¢.'],
        datasets: [{
          label: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏£‡∏≤‡∏¢‡πÄ‡∏î‡∏∑‡∏≠‡∏ô',
          data: [3.8, 4.0, 4.1, 4.2, 4.3, <%- overallAverage.toFixed(2) %>],
          borderColor: '#2E3094',
          backgroundColor: 'rgba(46, 48, 148, 0.1)',
          tension: 0.4,
          fill: true,
          pointRadius: 5,
          pointBackgroundColor: '#2E3094',
          pointBorderColor: '#fff',
          pointBorderWidth: 2
        }]
      },
      options: {
        responsive: true,
        maintainAspectRatio: true,
        plugins: {
          legend: { display: true, position: 'top' },
          tooltip: { mode: 'index', intersect: false }
        },
        scales: {
          y: { beginAtZero: true, max: 5, title: { display: true, text: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô' } },
          x: { title: { display: true, text: '‡πÄ‡∏î‡∏∑‡∏≠‡∏ô' } }
        }
      }
    });
  }

  // 2. Pie Chart - Score Distribution by Level
  const pieCtx = document.getElementById('pieChart');
  if (pieCtx) {
    const excellent = scores.filter(s => s >= 4.5).length;
    const veryGood = scores.filter(s => s >= 4 && s < 4.5).length;
    const good = scores.filter(s => s >= 3.5 && s < 4).length;
    const fair = scores.filter(s => s >= 3 && s < 3.5).length;
    const poor = scores.filter(s => s < 3).length;

    new Chart(pieCtx, {
      type: 'pie',
      data: {
        labels: ['‡∏î‡∏µ‡∏°‡∏≤‡∏Å (4.5-5)', '‡∏î‡∏µ (4-4.49)', '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (3.5-3.99)', '‡∏û‡∏≠‡πÉ‡∏ä‡πâ (3-3.49)', '‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á (<3)'],
        datasets: [{
          data: [excellent, veryGood, good, fair, poor],
          backgroundColor: ['#16A34A', '#3B82F6', '#FBB425', '#F59E0B', '#DC2626'],
          borderWidth: 2,
          borderColor: '#fff'
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { position: 'bottom' },
          tooltip: {
            callbacks: {
              label: (context) => `${context.label}: ${context.parsed} ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠`
            }
          }
        }
      }
    });
  }

  // 3. Scatter Plot - Score vs. Category Index
  const scatterCtx = document.getElementById('scatterChart');
  if (scatterCtx) {
    const scatterData = scores.map((score, idx) => ({ x: idx + 1, y: score }));
    
    new Chart(scatterCtx, {
      type: 'scatter',
      data: {
        datasets: [{
          label: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏î‡πâ‡∏≤‡∏ô',
          data: scatterData,
          backgroundColor: '#2E3094',
          borderColor: '#2E3094',
          pointRadius: 8,
          pointHoverRadius: 10
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: true },
          tooltip: {
            callbacks: {
              label: (context) => `‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠‡∏ó‡∏µ‡πà ${context.parsed.x}: ${context.parsed.y.toFixed(2)} ‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô`
            }
          }
        },
        scales: {
          x: { title: { display: true, text: '‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠' }, min: 0, max: 9 },
          y: { title: { display: true, text: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô' }, min: 0, max: 5 }
        }
      }
    });
  }

  // 4. Column Chart (Vertical Bar)
  const columnCtx = document.getElementById('columnChart');
  if (columnCtx) {
    new Chart(columnCtx, {
      type: 'bar',
      data: {
        labels: labels,
        datasets: [{
          label: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô',
          data: scores,
          backgroundColor: colors,
          borderColor: colors.map(c => c),
          borderWidth: 1
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { display: false },
          tooltip: { mode: 'index' }
        },
        scales: {
          y: { beginAtZero: true, max: 5, title: { display: true, text: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô' } },
          x: { ticks: { maxRotation: 45, minRotation: 45 } }
        }
      }
    });
  }

  // 5. Radar Chart
  const radarCtx = document.getElementById('radarChart');
  if (radarCtx) {
    new Chart(radarCtx, {
      type: 'radar',
      data: {
        labels: labels,
        datasets: [{
          label: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô',
          data: scores,
          borderColor: '#2E3094',
          backgroundColor: 'rgba(46, 48, 148, 0.2)',
          pointBackgroundColor: '#2E3094',
          pointBorderColor: '#fff',
          pointHoverBackgroundColor: '#fff',
          pointHoverBorderColor: '#2E3094'
        }, {
          label: '‡πÄ‡∏õ‡πâ‡∏≤‡∏´‡∏°‡∏≤‡∏¢',
          data: Array(scores.length).fill(5),
          borderColor: '#FBB425',
          backgroundColor: 'rgba(251, 180, 37, 0.1)',
          pointBackgroundColor: '#FBB425',
          pointBorderColor: '#fff',
          borderDash: [5, 5]
        }]
      },
      options: {
        responsive: true,
        plugins: { legend: { position: 'top' } },
        scales: {
          r: {
            beginAtZero: true,
            max: 5,
            ticks: { stepSize: 1 }
          }
        }
      }
    });
  }

  // 6. Doughnut Chart - Score Level Distribution
  const doughnutCtx = document.getElementById('doughnutChart');
  if (doughnutCtx) {
    const excellent = scores.filter(s => s >= 4.5).length;
    const veryGood = scores.filter(s => s >= 4 && s < 4.5).length;
    const good = scores.filter(s => s >= 3.5 && s < 4).length;
    const needImprovement = scores.filter(s => s < 3.5).length;

    new Chart(doughnutCtx, {
      type: 'doughnut',
      data: {
        labels: ['‡∏î‡∏µ‡∏°‡∏≤‡∏Å', '‡∏î‡∏µ', '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á', '‡∏õ‡∏£‡∏±‡∏ö‡∏õ‡∏£‡∏∏‡∏á'],
        datasets: [{
          data: [excellent, veryGood, good, needImprovement],
          backgroundColor: ['#16A34A', '#3B82F6', '#FBB425', '#DC2626'],
          borderWidth: 3,
          borderColor: '#fff'
        }]
      },
      options: {
        responsive: true,
        plugins: {
          legend: { position: 'right' },
          tooltip: {
            callbacks: {
              label: (context) => `${context.label}: ${context.parsed} ‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ (${((context.parsed / scores.length) * 100).toFixed(1)}%)`
            }
          }
        }
      }
    });
  }

  // 7. Area Chart - Comparison
  const areaCtx = document.getElementById('areaChart');
  if (areaCtx) {
    new Chart(areaCtx, {
      type: 'line',
      data: {
        labels: labels,
        datasets: [{
          label: '‡∏Ñ‡∏∞‡πÅ‡∏ô‡∏ô‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô',
          data: scores,
          borderColor: '#2E3094',
          backgroundColor: 'rgba(46, 48, 148, 0.3)',
          fill: true,
          tension: 0.4
        }, {
          label: '‡∏Ñ‡πà‡∏≤‡πÄ‡∏â‡∏•‡∏µ‡πà‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î',
          data: Array(scores.length).fill(<%- overallAverage.toFixed(2) %>),
          borderColor: '#FBB425',
          backgroundColor: 'rgba(251, 180, 37, 0.1)',
          fill: true,
          borderDash: [5, 5]
        }]
      },
      options: {
        responsive: true,
        plugins: { legend: { position: 'top' } },
        scales: {
          y: { beginAtZero: true, max: 5 },
          x: { ticks: { maxRotation: 45, minRotation: 45 } }
        }
      }
    });
  }
</script>
